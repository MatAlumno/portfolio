{% extends "base.html" %}
{% block content %}

<h1 style="text-align:center;">{{ datos.titulo }}</h1>
<p style="text-align:center;">{{ datos.texto }}</p>

<div class="category-bar">
    {% for cat in categorias %}
        <button class="cat-btn" onclick="filtrar('{{ cat.id }}')">
            {{ cat.nombre }}
        </button>
    {% endfor %}
</div>

{% for cat in categorias %}
<div id="cat_{{ cat.id }}" class="categoria-section"
     {% if not loop.first %} style="display:none;" {% endif %}>

    <h2>{{ cat.nombre }}</h2>

    <div class="grid">
        {% for item in items_por_categoria[cat.id] %}
        <div class="card">
            {% if item.imagen_url %}
            <img src="{{ item.imagen_url }}" alt="{{ item.nombre }}">
            {% endif %}

            <div class="card-content">
                <div>Rank: {{ item.ranking }}</div>
                <h3>{{ item.nombre }}</h3>
                <p>{{ item.descripcion }}</p>
            </div>
        </div>
        {% endfor %}
    </div>

</div>
{% endfor %}

<script>
function filtrar(id) {
    const secciones = document.querySelectorAll(".categoria-section");
    secciones.forEach(s => s.style.display = "none");

    document.getElementById("cat_" + id).style.display = "block";
}
</script>

{% endblock %}
