{% extends "base.html" %}
{% block title %}Editar contenido — {{ seccion }}{% endblock %}

{% block content %}
<h2>Editar contenido — {{ seccion }}</h2>
<a href="{{ url_for('admin_index') }}">Volver</a>

<form method="POST" enctype="multipart/form-data" style="margin-top:1rem;">

  {% if fila %}
      {# --- modo edición (hay datos) --- #}
      {% for campo, valor in fila.items() %}
        <div style="margin-bottom:0.6rem;">
          <label>{{ campo }}</label><br>

          {% if campo.endswith('_url') or 'imagen' in campo or 'avatar' in campo or 'portada' in campo %}
              <input type="file" name="{{ campo }}">
              {% if valor %}
                <p>Actual: <small>{{ valor }}</small></p>
              {% endif %}

          {% elif 'fecha' in campo %}
              <input type="date" name="{{ campo }}" value="{{ valor }}">

          {% elif campo.endswith('_id') %}
              <input type="number" name="{{ campo }}" value="{{ valor }}">

          {% else %}
              <input type="text" name="{{ campo }}" value="{{ valor }}" style="width:60%;">
          {% endif %}
        </div>
      {% endfor %}

  {% else %}
      {# --- modo creación de primera fila para index/sobre_mi/blog --- #}
      <div style="margin-bottom:0.6rem;">
        <label>Título</label><br>
        <input type="text" name="titulo" style="width:60%;">
      </div>

      <div style="margin-bottom:0.6rem;">
        <label>Texto</label><br>
        <textarea name="texto" style="width:80%; height:140px;"></textarea>
      </div>
  {% endif %}

  <button>Guardar</button>
</form>

{% endblock %}
